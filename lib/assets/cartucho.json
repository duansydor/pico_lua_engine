{
  "code": "p = { x = 8, y = 80, dx = 0, dy = 0, speed = 1.5, jump = -3.5 }\nscore = 0\nstate = \"play\"\n\nfunction collide_map(x, y)\n  local quinas = {\n    { cx = x + 1, cy = y + 1 },\n    { cx = x + 6, cy = y + 1 },\n    { cx = x + 1, cy = y + 7 },\n    { cx = x + 6, cy = y + 7 }\n  }\n  for i=1, 4 do\n    local mx = flr(quinas[i].cx / 8)\n    local my = flr(quinas[i].cy / 8)\n    local spr = mget(mx, my)\n    if spr == 1 then\n      mset(mx, my, -1)\n      score = score + 10\n    end\n    if spr == 2 then state = \"win\" end\n    if fget(spr, 0) then return true end\n  end\n  return false\nend\n\nfunction _update()\n  if state == \"win\" then return end\n  p.dx = 0\n  if btn(0) then p.dx = -p.speed end\n  if btn(1) then p.dx = p.speed end\n  p.dy = p.dy + 0.2\n  if p.dy > 3 then p.dy = 3 end\n  if not collide_map(p.x + p.dx, p.y) then p.x = p.x + p.dx end\n  local on_ground = false\n  if not collide_map(p.x, p.y + p.dy) then\n    p.y = p.y + p.dy\n  else\n    if p.dy > 0 then on_ground = true end\n    p.dy = 0\n  end\n  if btn(4) and on_ground then p.dy = p.jump end\nend\n\nfunction _draw()\n  cls(12)\n  if state == \"win\" then\n    print(\"VITORIA!\", 45, 50, 10)\n    print(\"SCORE: \"..score, 45, 60, 7)\n    return\n  end\n  map(0, 0, 0, 0, 16, 16)\n  print(\"SCORE: \"..score, 2, 2, 7)\n  spr(0, p.x, p.y, 0)\nend",
  "sprites": [[[0,11,11,11,11,11,0,0,11,11,11,11,7,11,0,0,15,15,5,15,15,5,15,0,15,15,15,4,15,15,0,0,11,11,12,12,12,11,11,0,15,12,12,12,12,12,15,0,0,12,12,0,12,12,0,0,0,4,4,0,4,4,0,0]],[[0,0,0,0,0,0,0,0,0,0,10,10,10,0,0,0,0,10,9,9,9,10,0,0,0,10,9,10,9,10,0,0,0,10,9,9,9,10,0,0,0,0,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,8,8,8,8,0,0,0,0,8,8,8,8,0,0,0,0,8,8,8,8,0,0,0,0,6,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,6,0,0,0,0,0,0]],[[11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]]],
  "flags": [0,0,0,1],
  "map": [[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,3,3,3,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,3,3,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,2,-1],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]]
}